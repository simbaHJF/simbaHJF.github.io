---
layout:     post
title:      "linux系统下的buffer和cache"
date:       2019-06-17 13:30:00 +0800
author:     "simba"
header-img: "img/post-bg-miui6.jpg"
tags:
    - linux

---

### Cache
Cache:高速缓存,是位于CPU与主存间的一种容量较小但速度很高的存储器.

由于CPU的速度远高于主存,CPU直接从内存中存取数据要等待一定的时间周期,Cache中保存着CPU刚用过或循环使用的一部分数据,当CPU在此使用该部分数据时可从Cache中直接调用,这样就减少了CPU的等待时间,提高了系统的效率.

缓存(Cache)是把读取过的数据保存起来,重新读取时若命中(找到需要的数据)就不要去读硬盘了,若没有命中就读硬盘.其中的数据会根据读取频率进行组织,把最频繁读取的内容放在最容易找到的位置,把不再读的内容不断往后排,直至从中删除.


* Page cache
Page cache实际上是针对文件系统的,是文件的缓存,在文件层面上的数据会缓存到page cache.

* Buffer cache
Buffer cache是针对磁盘块的缓存.



### Buffer
Buffer:缓冲区,一个用于存储 速度不同步的设备或优先级不同的设备之间传数据局 的区域.通过缓冲区,可以使进程之间的相互等待变少,从而使从速度慢的设备读入数据时或向速度慢的设备写入数据时,速度快的设备的操作进程不发生间断.

例如,当存储速度快的设备与存储速度慢的设备进行通信时,存储慢的设备先将数据存放到buffer,达到一定程度后,存储快的设备再读取buffer的数据,在此期间存储快的设备CPU可以干其他事情.

缓冲(Buffer)是根据磁盘的读写设计的,把分散的写操作集中进行,减少磁盘碎片和硬盘的反复寻道,从而提高系统性能.linux有一个守护进程定期清空缓冲内容(即写如磁盘),也可以通过sync命令手动清空缓冲.


### 总结
Cache是针对文件系统的,是文件的缓存
既可以用作"从文件读取数据的页缓存",也可以用作"写文件的页缓存"

Buffer是针对磁盘磁盘的,是磁盘存取的缓冲.内核可以把分散的
既可以用作"将要写入磁盘数据的缓冲",也可以用作"从磁盘读取数据的缓冲".


Buffer和Cache从写的角度来说,不仅可以优化磁盘和文件的写入,对应用程序也有好处,应用程序可以在数据真正落盘前,就返回去做其他工作.
从读的角度来说,既可以加速读取那些需要频繁访问的数据,也降低了频繁I/O对磁盘的压力.