---
layout:     post
title:      "mysql -- 一些优化技巧"
date:       2021-05-22 16:30:00 +0800
author:     "simba"
header-img: "img/post-bg-miui6.jpg"
tags:
    - mysql

---




* 设计索引时,尽量使用基数大的(即区分度大的)字段,这样才能发挥出B+树二分查找的优势
* 条件允许的情况下,查非主键索引尽量使其能够通过覆盖索引完成业务查询需要,以避免回表
* 写完立即读的场景下,关闭change buffer
* 设置多个buffer pool,优化buffer pool大小,可设置的稍大一些,避免请求高峰时频繁回写脏页
	> 多线程并发访问一个buffer pool是需要加锁的,虽然这其实也很快,因为是基于内存的.但设置多个buffer pool仍能提高并发度,有不错的性能提升
* join时,小规模表驱动大规模表,关联字段在大表中尽量可以走索引
	> join时,驱动表N是走全表扫描,而被驱动表M是走树搜索,近似复杂度是 N + N * 2 * logM <br>
	  驱动表扫描数量 + 驱动表扫描数量 * (被驱动表树搜索时间) * 2, 乘2是因为被驱动表还要去主键索引回表查询
