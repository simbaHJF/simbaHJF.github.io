---
layout:     post
title:      "redis高并发实战--最经典的缓存+数据库读写模式:cache aside pattern"
date:       2021-03-28 14:00:00 +0800
author:     "simba"
header-img: "img/post-bg-miui6.jpg"
tags:
    - redis

---


## 导航
[一. Cache Aside Pattern](#jump1)
<br>
[二. 为什么是删除缓存,而不是更新缓存呢?](#jump2)
<br>









<br><br>
## <span id="jump1">一. Cache Aside Pattern</span>

1. 读的时候,先读缓存,缓存没有的话,读数据库,然后取出数据后放入缓存,同时返回响应
2. 更新的时候,先删掉缓存,然后更新数据库



<br><br>
## <span id="jump2">二. 为什么是删除缓存,而不是更新缓存呢?</span>

因为缓存有的时候,不是简单的直接从数据库中取出来的值.可能更新了某个表的一个字段,然后其对应的缓存,是需要查询另外两个表的数据,并进行运算,才能计算出缓存最新的值的,因此更新缓存的代价很高.<br>

如果频繁修改一个缓存涉及的多个表,那么这个缓存会被频繁的更新.但问题在于,这个缓存到底会不会被访问到呢?<br>

举个例子,一个缓存涉及的表字段,在1分钟内修改了20次,那么缓存更新20次,但这个缓存在1分钟之内就被读取了1次.如果只是删除缓存的话,那么1分钟之内,这个缓存不过就是重新计算一次而已,开销大幅度降低.<br>

删除缓存,而不是更新缓存,其实就是一种lazy的设计思想,不要每次都重新做复杂的计算而不管它是否会被真正用到,而是让它到被需要使用的时候再重新计算.